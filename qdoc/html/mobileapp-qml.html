<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- sources.qdoc -->
  <title>MobileApp.qml | EventApp 0.1</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="main">
    <div class="main-rounded">
      <div class="navigationbar">
        <table><tr>
<td >MobileApp.qml</td>        </tr></table>
      </div>
    </div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar"><div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">MobileApp.qml</h1>
<span class="subtitle"></span>
<!-- $$$MobileApp.qml.html-description -->
<div class="descr"> <a name="details"></a>
<pre class="cpp">

  import VPlayApps 1.0
  import QtQuick 2.4

  import &quot;items&quot;
  import &quot;navigation&quot;
  import &quot;pages&quot;
  import &quot;pages/others&quot;
  import &quot;pages/selections&quot;
  <span class="type">IAppProperties</span> {

      <span class="keyword">function</span> <span class="name">setSelectedEventName</span>(<span class="name">pName</span>)
      {
          <span class="name">selectedEventTitle</span> <span class="operator">=</span> <span class="name">pName</span>;
          <span class="keyword">if</span> (<span class="name">selectedEventTitle</span>.<span class="name">length</span> <span class="operator">&gt;</span> <span class="number">33</span>)
          {
              var <span class="name">parts</span> = <span class="name">selectedEventTitle</span>.<span class="name">split</span>(<span class="string">&quot; &quot;</span>);
              var <span class="name">count</span> = <span class="name">parts</span>.<span class="name">length</span>;

              <span class="name">selectedEventTitle</span> <span class="operator">=</span> <span class="name">parts</span>[<span class="number">0</span>];
              <span class="keyword">for</span> (<span class="keyword">var</span> <span class="name">i</span> = <span class="number">1</span> ; <span class="name">i</span> <span class="operator">&lt;</span> <span class="name">count</span>; i++)
              {
                  var <span class="name">str</span>   = <span class="name">parts</span>[<span class="name">i</span>];
                  var <span class="name">total</span> = <span class="name">selectedEventTitle</span>.<span class="name">length</span>  <span class="operator">+</span> <span class="name">str</span>.<span class="name">length</span>;

                  <span class="keyword">if</span> (<span class="name">total</span> <span class="operator">&lt;=</span> <span class="number">33</span>)
                      <span class="name">selectedEventTitle</span> <span class="operator">+=</span>  <span class="string">&quot; &quot;</span> <span class="operator">+</span> <span class="name">parts</span>[<span class="name">i</span>];
                  <span class="keyword">else</span>
                  {
                      <span class="name">selectedEventTitle</span> <span class="operator">+=</span> <span class="string">&quot;..&quot;</span>
                      <span class="keyword">break</span>;
                  }
              }
          }

          <span class="name">console</span>.<span class="name">debug</span>(<span class="string">&quot;setSelectedEventName  : &quot;</span> <span class="operator">+</span> <span class="name">pName</span>);
      }

      <span class="keyword">function</span> <span class="name">setIndeks</span>(<span class="name">pindeks</span>)
      {
          <span class="name">footerSelector</span>.<span class="name">item</span>.<span class="name">setCurrentIndex</span>(<span class="name">pindeks</span>);
      }

      <span class="name">onGoHomepage</span>:
      {
          <span class="name">globalNavStack</span>.<span class="name">popAllExceptFirst</span>();

      }

      <span class="keyword">function</span> <span class="name">changeCurrentIndex</span>(<span class="name">id</span>){
          <span class="name">navPane</span>.<span class="name">currentIndex</span> <span class="operator">=</span> <span class="name">id</span>;
      }

      <span class="keyword">function</span> <span class="name">openNavDrawer</span>(){
          <span class="name">navigationBar</span>.<span class="name">open</span>()
      }

      <span class="keyword">function</span> <span class="name">setFooterByID</span>(<span class="name">pID</span>)
      {
          <span class="name">footerStacked</span>.<span class="name">insertFooterByID</span>(<span class="name">pID</span>);
      }

      <span class="keyword">function</span> <span class="name">setHeaderByID</span>(<span class="name">pID</span> , pTitle)
      {
          <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">1</span>)
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="number">1</span>, <span class="name">pTitle</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">2</span>)
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="number">2</span>, <span class="name">pTitle</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">3</span>)
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="number">3</span>, <span class="name">pTitle</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">4</span>)
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="number">4</span>, <span class="name">pTitle</span>);
          }
          <span class="comment">// GiriÅŸ yap ekranÄ± - authantication</span>
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">5</span>)
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="number">5</span> , <span class="string">&quot;GiriÅŸ Yap&quot;</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">6</span>)
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="number">6</span>, <span class="name">pTitle</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">7</span>)
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="number">7</span>, <span class="name">pTitle</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">9</span>)
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="number">9</span> , <span class="string">&quot;Åehir Etkinlikleri HakkÄ±nda&quot;</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">10</span>)
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="number">10</span> , <span class="string">&quot;KullanÄ±m KoÅŸullarÄ±&quot;</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">11</span>) <span class="comment">// Yemek kategorisi</span>
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="name">pID</span>, <span class="name">pTitle</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pID</span> <span class="operator">===</span> <span class="number">12</span>) <span class="comment">// Neler yaptÄ±k.</span>
          {
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="number">11</span> , <span class="string">&quot;Neler YaptÄ±k?&quot;</span>);
          }

          <span class="keyword">else</span>
              <span class="name">stackedHeader</span>.<span class="name">setHeader</span>(<span class="name">pID</span>, <span class="name">pTitle</span>);
      }

      <span class="type">Component</span> { <span class="name">id</span>: <span class="name">selectedEventPageComponent</span>;  <span class="type">PageSelectedEvent</span> { <span class="name">selectedEventModel</span>: <span class="name">selectedEventModelData</span>; } }
      <span class="type">Component</span> { <span class="name">id</span>: <span class="name">selectedPlacePageComponent</span>;  <span class="type">PageSelectedPlace</span> {  <span class="name">model</span>: <span class="name">selectedPlaceModelData</span> } }
      <span class="type">Component</span> { <span class="name">id</span>: <span class="name">selectedCategoryPageComponent</span>;  <span class="type">PageSelectedCategory</span> { <span class="name">title</span>: <span class="name">selectedCategoryTitle</span> } }
      <span class="type">Component</span> { <span class="name">id</span>: <span class="name">aboutPageComponent</span>;  <span class="type">PageAbout</span> {  } }

      <span class="keyword">function</span> <span class="name">eventSelected</span>(<span class="name">pEventData</span>)
      {
          <span class="name">closeSearchPanelReceived</span>();
          <span class="name">selectedEventModelData</span> <span class="operator">=</span>  <span class="name">pEventData</span>;
          <span class="name">selectedEventTitle</span> <span class="operator">=</span> <span class="name">pEventData</span>.<span class="name">modelData</span>.<span class="name">Name</span>;
          <span class="name">globalNavStack</span>.<span class="name">popAllExceptFirstAndPush</span>(<span class="name">selectedEventPageComponent</span>, {});
      }
      <span class="comment">// Mekan listesi ekranÄ±nda herhangi bir mekan seÃ§ildiÄŸinde ekranÄ±n gÃ¼ncellenmesi iÃ§in.</span>
      <span class="keyword">function</span> <span class="name">selectPlace</span>(<span class="name">pPlaceData</span>)
      {
          <span class="name">console</span>.<span class="name">log</span>(<span class="string">&quot;place selected&quot;</span>);
          <span class="name">selectedPlaceModelData</span> <span class="operator">=</span>  <span class="name">pPlaceData</span>;
          <span class="name">globalNavStack</span>.<span class="name">popAllExceptFirstAndPush</span>(<span class="name">selectedPlacePageComponent</span>, {});
      }

      <span class="keyword">function</span> <span class="name">categorySelected</span>(<span class="name">pCategoryName</span>)
      {

          <span class="name">closeSearchPanelReceived</span>();
          <span class="name">currentlySelectedCategoryName</span> <span class="operator">=</span> <span class="name">pCategoryName</span>;

          <span class="comment">// StackView'a ait olanlar.</span>
          <span class="keyword">if</span> (<span class="name">pCategoryName</span> <span class="operator">===</span> <span class="string">&quot;concert&quot;</span>)
          {
              <span class="name">CategoryResults</span>.<span class="name">clear</span>();
              <span class="name">RequestManager</span>.<span class="name">getEventsByType</span>(<span class="string">&quot;concert&quot;</span>, <span class="number">10</span>);
              <span class="name">selectedCategoryTitle</span> <span class="operator">=</span> <span class="name">qsTr</span>(<span class="string">&quot;Art &amp; Entertainment&quot;</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pCategoryName</span> <span class="operator">===</span> <span class="string">&quot;academic&quot;</span>)
          {
              <span class="name">CategoryResults</span>.<span class="name">clear</span>();
              <span class="name">RequestManager</span>.<span class="name">getEventsByType</span>(<span class="string">&quot;academic&quot;</span>, <span class="number">10</span>);
              <span class="name">selectedCategoryTitle</span> <span class="operator">=</span> <span class="name">qsTr</span>(<span class="string">&quot;Academic&quot;</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pCategoryName</span> <span class="operator">===</span> <span class="string">&quot;kids&quot;</span>)
          {
              <span class="name">CategoryResults</span>.<span class="name">clear</span>();
              <span class="name">RequestManager</span>.<span class="name">getEventsByType</span>(<span class="string">&quot;kids&quot;</span>,<span class="number">10</span>);
              <span class="name">selectedCategoryTitle</span> <span class="operator">=</span> <span class="name">qsTr</span>(<span class="string">&quot;Kids&quot;</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pCategoryName</span> <span class="operator">===</span> <span class="string">&quot;food&quot;</span>)
          {
              <span class="name">CategoryResults</span>.<span class="name">clear</span>();
              <span class="name">RequestManager</span>.<span class="name">getEventsByType</span>(<span class="string">&quot;food&quot;</span>,<span class="number">10</span>);
              <span class="name">selectedCategoryTitle</span> <span class="operator">=</span> <span class="name">qsTr</span>(<span class="string">&quot;Foods &amp; Workshops&quot;</span>);
              <span class="comment">//lastSelectedCategoryTitle = pCategoryName;</span>

              <span class="comment">// setFooterByID(11);</span>
              <span class="comment">// setHeaderByID(11 , selectedCategoryTitle);</span>
              <span class="comment">// navPane.pushPageByPageNumber(11);</span>
              <span class="comment">// return;</span>
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pCategoryName</span> <span class="operator">===</span> <span class="string">&quot;about&quot;</span>)
          {
              <span class="name">globalNavStack</span>.<span class="name">popAllExceptFirstAndPush</span>(<span class="name">aboutPageComponent</span>, {});
              <span class="keyword">return</span>;
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pCategoryName</span> <span class="operator">===</span> <span class="string">&quot;recent&quot;</span>)
          {
              <span class="name">CategoryResults</span>.<span class="name">clear</span>();
              <span class="name">RequestManager</span>.<span class="name">getEventsByType</span>(<span class="string">&quot;recent&quot;</span>, <span class="number">10</span>);
              <span class="name">selectedCategoryTitle</span> <span class="operator">=</span> <span class="name">qsTr</span>(<span class="string">&quot;En Yeni Etkinlikler&quot;</span>);
              <span class="keyword">return</span>;
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pCategoryName</span> <span class="operator">===</span> <span class="string">&quot;popular&quot;</span>)
          {
              <span class="name">CategoryResults</span>.<span class="name">clear</span>();
              <span class="name">RequestManager</span>.<span class="name">getEventsByType</span>(<span class="string">&quot;popular&quot;</span>, <span class="number">10</span>);
              <span class="name">selectedCategoryTitle</span> <span class="operator">=</span> <span class="name">qsTr</span>(<span class="string">&quot;En PopÃ¼ler Etkinlikler&quot;</span>);
              <span class="keyword">return</span>;
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pCategoryName</span> <span class="operator">===</span> <span class="string">&quot;missed&quot;</span>)
          {
              <span class="name">CategoryResults</span>.<span class="name">clear</span>();
              <span class="name">RequestManager</span>.<span class="name">getEventsByType</span>(<span class="string">&quot;missed&quot;</span>, <span class="number">10</span>);
              <span class="name">selectedCategoryTitle</span> <span class="operator">=</span> <span class="name">qsTr</span>(<span class="string">&quot;KaÃ§Ä±rdÄ±ÄŸÄ±nÄ±z Etkinlikler&quot;</span>)
              <span class="comment">// return;</span>
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pCategoryName</span> <span class="operator">===</span> <span class="string">&quot;all&quot;</span>)
          {
              <span class="name">CategoryResults</span>.<span class="name">clear</span>();
              <span class="name">RequestManager</span>.<span class="name">getEventsByType</span>(<span class="string">&quot;all&quot;</span>, <span class="number">10</span>);
              <span class="name">selectedCategoryTitle</span> <span class="operator">=</span> <span class="name">qsTr</span>(<span class="string">&quot;All Events&quot;</span>)
          }
          <span class="keyword">else</span>
          {
              <span class="keyword">return</span>;
          }

          <span class="name">lastSelectedCategoryTitle</span> <span class="operator">=</span> <span class="name">pCategoryName</span>;
          <span class="name">globalNavStack</span>.<span class="name">popAllExceptFirstAndPush</span>(<span class="name">selectedCategoryPageComponent</span>, {});
          <span class="name">console</span>.<span class="name">log</span>(<span class="string">&quot;Category Seleted : &quot;</span> <span class="operator">+</span> <span class="name">pCategoryName</span>);
      }

      property <span class="type">string</span> <span class="name">currentlySelectedCategoryName</span>: <span class="string">&quot;&quot;</span>;
      <span class="keyword">function</span> <span class="name">setDrawerIndex</span>(<span class="name">pIndex</span>)
      {
          <span class="name">navigationBar</span>.<span class="name">index</span> <span class="operator">=</span> <span class="name">pIndex</span>;
      }

      <span class="keyword">function</span> <span class="name">openPageByName</span>(<span class="name">pName</span>)
      {
          <span class="keyword">if</span>(<span class="name">pName</span> <span class="operator">===</span> <span class="string">&quot;Authantication&quot;</span>)
          {

          }
      }

      <span class="keyword">function</span> <span class="name">canGoUp</span>()
      {
          <span class="name">navPane</span>.<span class="name">canGoUp</span>();
      }

      <span class="keyword">function</span> <span class="name">tryToExit</span>()
      {
          <span class="name">console</span>.<span class="name">log</span>(<span class="string">&quot;Try to exit.&quot;</span>);
          <span class="name">Qt</span>.<span class="name">quit</span>();

      }

      <span class="keyword">function</span> <span class="name">whoAmI</span>()
      {
          <span class="keyword">return</span> <span class="string">&quot;main&quot;</span>;
      }

      <span class="comment">// Geri tuÅŸuna basÄ±ldÄ±ÄŸÄ± taktirde ilgili header ve footer kÄ±smÄ± zaten otomatik olarak iÅŸlevini yerine getirmektedir.</span>
      <span class="comment">// Ancak sayfanÄ±n otomatik bir ÅŸekilde yukarÄ± kaydÄ±rÄ±labilmesi iÃ§in aÅŸaÄŸÄ±daki kontrollerden sonra setSwiperViewBack()</span>
      <span class="comment">// sinyalinin tetiklenmesi gerekmektedir.</span>
      property <span class="type">bool</span> <span class="name">amk</span>: <span class="number">false</span>;
      <span class="name">onGlobalBackPressed</span>:
      {
          <span class="comment">// EÄŸer sayfa yukarÄ± Ã§Ä±kmaya uygunsa yukarÄ± Ã§Ä±kÄ±lÄ±r</span>
          <span class="keyword">if</span> (<span class="name">navPane</span>.<span class="name">canGoUp</span>())
          {
              <span class="name">navPane</span>.<span class="name">scrollTop</span>();
              <span class="keyword">return</span>;
          }

          <span class="comment">// EÄŸer stakview derinliÄŸi (iÃ§indeki sayfa sayÄ±sÄ± 1'den fazla ise sadece popOnePage iÅŸlemi gerÃ§ekleÅŸtirilecektir.</span>
          <span class="keyword">if</span> (<span class="name">navPane</span>.<span class="name">depth</span> <span class="operator">&gt;</span> <span class="number">1</span>)
          {
              <span class="name">navPane</span>.<span class="name">popOnePage</span>();
              <span class="name">footerBack</span>();
              <span class="name">headerBack</span>();
          }

          <span class="comment">// Aksi durumda, zaten anasayfadayÄ±z anlamÄ±nÄ± iÃ§ermektedir ve yukarÄ±da bahsedilen event tetiklenecektir.</span>
          <span class="keyword">else</span>
          {
              <span class="name">setSwiperViewBack</span>();
          }
      }

      <span class="comment">// Indeksin deÄŸiÅŸmesi durumunda tekrar edilecek sorgularÄ±n kontrol edileceÄŸi slot aÅŸaÄŸÄ±daki gibidir. YukarÄ±daki</span>
      <span class="comment">// Sinyal tetiklendiÄŸi zaman aynÄ± zamanda aÅŸaÄŸÄ±daki komut dizini de yerine getirelecektir.</span>
      <span class="name">onSwipeViewIndexChanged</span>:
      {
          <span class="name">console</span>.<span class="name">log</span>(<span class="string">&quot;Swipeview index changed&quot;</span> <span class="operator">+</span> <span class="name">pIndex</span>);
          <span class="keyword">if</span> (<span class="name">pIndex</span> <span class="operator">===</span> <span class="number">0</span>)
          {
              <span class="name">RequestManager</span>.<span class="name">getEventsByType</span>(<span class="string">&quot;homepage_recent&quot;</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pIndex</span> <span class="operator">===</span> <span class="number">1</span>)
          {
              <span class="name">RequestManager</span>.<span class="name">getEventsByType</span>(<span class="string">&quot;all&quot;</span>, <span class="number">10</span>);
          }
          <span class="keyword">else</span> <span class="keyword">if</span> (<span class="name">pIndex</span> <span class="operator">===</span> <span class="number">2</span>)
          {
              <span class="name">console</span>.<span class="name">log</span>(<span class="string">&quot;Trying to get places&quot;</span>);
              <span class="name">RequestManager</span>.<span class="name">getPlaces</span>();
          }

      }

      <span class="keyword">function</span> <span class="name">timerInstance</span>() {
          <span class="keyword">return</span> <span class="name">Qt</span>.<span class="name">createQmlObject</span>(<span class="string">&quot;import QtQuick 2.0; Timer {}&quot;</span>, <span class="name">appWindow</span>);
      }

      <span class="keyword">function</span> <span class="name">delay</span>(<span class="name">delayTime</span>, cb) {
          var <span class="name">timer</span> =  <span class="name">timerInstance</span>();
          <span class="name">timer</span>.<span class="name">interval</span> <span class="operator">=</span> <span class="name">delayTime</span>;
          <span class="name">timer</span>.<span class="name">repeat</span> <span class="operator">=</span> <span class="number">false</span>;
          <span class="name">timer</span>.<span class="name">triggered</span>.<span class="name">connect</span>(<span class="name">cb</span>);
          <span class="name">timer</span>.<span class="name">start</span>();
      }
  }

</pre>
</div>
<!-- @@@MobileApp.qml.html -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2017 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br>    Qt and respective logos are trademarks of The Qt Company Ltd.     in Finland and/or other countries worldwide. All other trademarks are property
   of their respective owners. </p>
</div>
</body>
</html>
